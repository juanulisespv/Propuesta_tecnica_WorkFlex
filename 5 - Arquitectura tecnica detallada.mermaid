graph TB
    subgraph "Clientes"
        Web[ğŸ’» Web App<br/>React + Vite]
        Mobile[ğŸ“± Mobile<br/>React Native<br/>Fase 2]
        Admin[ğŸ–¥ï¸ Admin Panel<br/>React]
    end
    
    subgraph "CDN y Assets"
        CDN[â˜ï¸ Cloudflare CDN<br/>Assets estÃ¡ticos]
        S3[ğŸ“¦ AWS S3<br/>ImÃ¡genes y PDFs]
    end
    
    subgraph "API Gateway & Load Balancer"
        LB[âš–ï¸ NGINX<br/>Load Balancer]
        Gateway[ğŸšª API Gateway<br/>Rate limiting<br/>Authentication]
    end
    
    subgraph "AplicaciÃ³n Backend - Modular Monolith"
        direction TB
        API[ğŸ”Œ REST API Layer<br/>Express.js / FastAPI]
        
        subgraph "MÃ³dulos de Negocio"
            Auth[ğŸ” Auth Module<br/>JWT + OAuth]
            Reservas[ğŸ“… Reservations Module<br/>Booking logic]
            Espacios[ğŸ¢ Spaces Module<br/>Availability engine]
            Pagos[ğŸ’³ Payments Module<br/>Payment orchestration]
            Notif[ğŸ“§ Notifications Module<br/>Email/SMS queue]
            Reports[ğŸ“Š Reports Module<br/>Analytics engine]
        end
        
        subgraph "Capa de Datos"
            Repos[ğŸ“š Repositories<br/>Data access layer]
        end
    end
    
    subgraph "Capa de Cache"
        Redis[(ğŸ”´ Redis<br/>Session store<br/>Query cache)]
    end
    
    subgraph "Base de Datos"
        Postgres[(ğŸ˜ PostgreSQL<br/>Master DB)]
        PG_Read[(ğŸ˜ PostgreSQL<br/>Read Replica<br/>Fase 2)]
    end
    
    subgraph "Message Queue Fase 2"
        Queue[ğŸ“¨ RabbitMQ/SQS<br/>Async tasks]
    end
    
    subgraph "Servicios Externos"
        Stripe[ğŸ’³ Stripe API<br/>Payment processing]
        SendGrid[ğŸ“§ SendGrid<br/>Transactional email]
        Twilio[ğŸ“± Twilio<br/>SMS notifications]
        Maps[ğŸ—ºï¸ Google Maps API<br/>Geolocation]
    end
    
    subgraph "Monitoring & Logging"
        Logger[ğŸ“ Winston/Pino<br/>Application logs]
        Monitor[ğŸ“ˆ Prometheus + Grafana<br/>Metrics & alerts]
        Sentry[ğŸ› Sentry<br/>Error tracking]
    end
    
    subgraph "CI/CD Pipeline"
        GitHub[ğŸ™ GitHub<br/>Source control]
        Actions[âš™ï¸ GitHub Actions<br/>CI/CD]
        Docker[ğŸ³ Docker<br/>Containerization]
    end
    
    Web --> CDN
    Admin --> CDN
    Web --> LB
    Mobile --> LB
    Admin --> LB
    
    CDN --> S3
    
    LB --> Gateway
    Gateway --> API
    
    API --> Auth
    API --> Reservas
    API --> Espacios
    API --> Pagos
    API --> Notif
    API --> Reports
    
    Auth --> Repos
    Reservas --> Repos
    Espacios --> Repos
    Pagos --> Repos
    Notif --> Queue
    Reports --> Repos
    
    Repos --> Redis
    Repos --> Postgres
    
    Postgres -.->|ReplicaciÃ³n| PG_Read
    Reports --> PG_Read
    
    Pagos --> Stripe
    Notif --> SendGrid
    Notif --> Twilio
    Espacios --> Maps
    
    API --> Logger
    API --> Monitor
    API --> Sentry
    
    GitHub --> Actions
    Actions --> Docker
    Docker --> API
    
    style Web fill:#4A90E2
    style Admin fill:#4A90E2
    style API fill:#2ECC71
    style Postgres fill:#336791
    style Redis fill:#DC382D
    style Stripe fill:#635BFF
    style Gateway fill:#FF6B6B