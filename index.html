<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>WorkFlex - Diagramas del Proyecto</title>
    <script type="module">
        import mermaid from 'https://cdn.jsdelivr.net/npm/mermaid@10/dist/mermaid.esm.min.mjs';
        mermaid.initialize({
            startOnLoad: true,
            theme: 'default',
            securityLevel: 'loose',
            fontFamily: 'Inter, sans-serif'
        });
    </script>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        :root {
            --primary: #4A90E2;
            --secondary: #2ECC71;
            --dark: #2C3E50;
            --light: #ECF0F1;
            --white: #FFFFFF;
        }
        body {
            font-family: 'Inter', -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            line-height: 1.6;
            color: var(--dark);
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 2rem 1rem;
        }
        .container {
            max-width: 1400px;
            margin: 0 auto;
            background: var(--white);
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            overflow: hidden;
        }
        header {
            background: linear-gradient(135deg, var(--primary) 0%, #357ABD 100%);
            color: var(--white);
            padding: 3rem 2rem;
            text-align: center;
        }
        header h1 {
            font-size: 2.5rem;
            font-weight: 700;
            margin-bottom: 0.5rem;
        }
        header .subtitle {
            font-size: 1.2rem;
            opacity: 0.95;
        }
        .content {
            padding: 3rem 2rem;
        }
        .intro {
            background: var(--light);
            padding: 2rem;
            border-radius: 12px;
            margin-bottom: 3rem;
            text-align: center;
        }
        .intro h2 {
            color: var(--primary);
            margin-bottom: 1rem;
        }
        .diagram-container {
            background: var(--white);
            border: 2px solid var(--light);
            border-radius: 12px;
            padding: 2rem;
            margin-bottom: 2rem;
            overflow-x: auto;
        }
        .diagram-container h3 {
            color: var(--primary);
            margin-bottom: 1rem;
            font-size: 1.5rem;
        }
        .diagram-container p {
            color: #666;
            margin-bottom: 1.5rem;
        }
        .mermaid {
            text-align: center;
            background: var(--white);
        }
        footer {
            background: var(--dark);
            color: var(--white);
            padding: 2rem;
            text-align: center;
        }
        footer a {
            color: var(--secondary);
            text-decoration: none;
        }
        footer a:hover {
            color: var(--primary);
        }
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }
            .content {
                padding: 2rem 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>üè¢ WorkFlex</h1>
            <p class="subtitle">Diagramas del Proyecto - Sistema de Gesti√≥n de Coworking</p>
        </header>

        <div class="content">
            <div class="intro">
                <h2>üìä Diagramas del Proyecto</h2>
                <p>Todos los diagramas Mermaid del proyecto WorkFlex renderizados directamente.</p>
            </div>


            <div class="diagram-container">
                <h3>üë• Diagrama de Casos de Uso</h3>
                <p>Muestra las interacciones entre los actores (Usuario Cliente, Administrador, Sistema de Pagos) y el sistema WorkFlex.</p>
                <pre class="mermaid">
graph TB
    subgraph Sistema["Sistema WorkFlex"]
        UC1[Registrarse]
        UC2[Iniciar Sesi√≥n]
        UC3[Gestionar Perfil]
        UC4[Buscar Espacios]
        UC5[Ver Disponibilidad]
        UC6[Realizar Reserva]
        UC7[Modificar Reserva]
        UC8[Cancelar Reserva]
        UC9[Ver Historial Reservas]
        UC10[Gestionar Membres√≠a]
        UC11[Realizar Pago]
        UC12[Descargar Factura]
        UC13[Check-in/Check-out]
        UC14[Gestionar Espacios]
        UC15[Gestionar Usuarios]
        UC16[Ver Dashboard]
        UC17[Generar Reportes]
        UC18[Configurar Tarifas]
        UC19[Gestionar Notificaciones]
        UC20[Procesar Pago]
    end
    
    Usuario[üë§ Usuario Cliente]
    Admin[üë§ Administrador]
    Sistema_Pago[üè¶ Sistema de Pagos<br/>Pasarela Externa]
    
    Usuario -->|usa| UC1
    Usuario -->|usa| UC2
    Usuario -->|usa| UC3
    Usuario -->|usa| UC4
    Usuario -->|usa| UC5
    Usuario -->|usa| UC6
    Usuario -->|usa| UC7
    Usuario -->|usa| UC8
    Usuario -->|usa| UC9
    Usuario -->|usa| UC10
    Usuario -->|usa| UC11
    Usuario -->|usa| UC12
    Usuario -->|usa| UC13
    
    Admin -->|usa| UC2
    Admin -->|usa| UC14
    Admin -->|usa| UC15
    Admin -->|usa| UC16
    Admin -->|usa| UC17
    Admin -->|usa| UC18
    Admin -->|usa| UC19
    
    UC6 -.include.-> UC5
    UC6 -.include.-> UC2
    UC7 -.include.-> UC2
    UC8 -.include.-> UC2
    UC11 -.include.-> UC20
    UC20 -.->|comunica con| Sistema_Pago
    
    UC6 -.extend.-> UC11
    UC10 -.extend.-> UC11
    
    style Usuario fill:#4A90E2
    style Admin fill:#E94B3C
    style Sistema_Pago fill:#50C878
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üèóÔ∏è Diagrama de Clases</h3>
                <p>Define las entidades principales del sistema: Usuario, Cliente, Administrador, Reserva, Pago, Factura, Membres√≠a, etc.</p>
                <pre class="mermaid">
classDiagram
    class Usuario {
        -int id
        -String nombre
        -String email
        -String password
        -String telefono
        -Date fechaRegistro
        -TipoUsuario rol
        +registrarse()
        +iniciarSesion()
        +actualizarPerfil()
        +recuperarPassword()
    }
    
    class Cliente {
        -int creditosDisponibles
        -Date ultimoAcceso
        +realizarReserva()
        +cancelarReserva()
        +consultarHistorial()
        +realizarCheckIn()
    }
    
    class Administrador {
        -String departamento
        -List~String~ permisos
        +gestionarEspacios()
        +generarReportes()
        +configurarTarifas()
        +gestionarUsuarios()
    }
    
    class Membresia {
        -int id
        -TipoMembresia tipo
        -float precioMensual
        -int horasIncluidas
        -Date fechaInicio
        -Date fechaVencimiento
        -boolean activa
        +renovar()
        +upgrade()
        +calcularBeneficios()
        +verificarVigencia()
    }
    
    class Sede {
        -int id
        -String nombre
        -String direccion
        -String ciudad
        -String telefono
        -String horarioApertura
        -String horarioCierre
        +obtenerEspacios()
        +verificarDisponibilidad()
    }
    
    class Espacio {
        -int id
        -String nombre
        -TipoEspacio tipo
        -int capacidad
        -float precioPorHora
        -List~String~ equipamiento
        -String descripcion
        -List~String~ fotos
        +verificarDisponibilidad()
        +calcularPrecio()
        +obtenerHorariosDisponibles()
    }
    
    class Reserva {
        -int id
        -Date fechaReserva
        -Time horaInicio
        -Time horaFin
        -EstadoReserva estado
        -float precioTotal
        -Date fechaCreacion
        +confirmar()
        +modificar()
        +cancelar()
        +calcularCosto()
        +enviarConfirmacion()
    }
    
    class Pago {
        -int id
        -float monto
        -Date fechaPago
        -MetodoPago metodoPago
        -EstadoPago estado
        -String transaccionId
        +procesar()
        +verificar()
        +reembolsar()
        +generarFactura()
    }
    
    class Factura {
        -int id
        -String numeroFactura
        -Date fechaEmision
        -float subtotal
        -float impuestos
        -float total
        -String rutaArchivo
        +generar()
        +descargar()
        +enviarPorEmail()
    }
    
    class Notificacion {
        -int id
        -String mensaje
        -TipoNotificacion tipo
        -Date fechaEnvio
        -boolean leida
        +enviar()
        +marcarLeida()
    }
    
    class Reporte {
        -int id
        -TipoReporte tipo
        -Date fechaGeneracion
        -String parametros
        -String rutaArchivo
        +generar()
        +exportarPDF()
        +exportarExcel()
    }
    
    %% Herencia
    Usuario <|-- Cliente
    Usuario <|-- Administrador
    
    %% Relaciones
    Cliente "1" -- "0..1" Membresia : tiene
    Cliente "1" -- "0..*" Reserva : realiza
    Cliente "1" -- "0..*" Pago : efect√∫a
    Cliente "1" -- "0..*" Notificacion : recibe
    
    Sede "1" -- "1..*" Espacio : contiene
    Espacio "1" -- "0..*" Reserva : es reservado en
    
    Reserva "1" -- "0..1" Pago : genera
    Pago "1" -- "1" Factura : produce
    
    Administrador "1" -- "0..*" Reporte : genera
    Administrador "1" -- "0..*" Sede : gestiona
    
    %% Enumeraciones
    class TipoUsuario {
        <<enumeration>>
        CLIENTE
        ADMINISTRADOR
        SUPERADMIN
    }
    
    class TipoMembresia {
        <<enumeration>>
        BASICA
        PROFESIONAL
        EMPRESARIAL
    }
    
    class TipoEspacio {
        <<enumeration>>
        PUESTO_COMPARTIDO
        OFICINA_PRIVADA
        SALA_REUNIONES
        SALA_CONFERENCIAS
    }
    
    class EstadoReserva {
        <<enumeration>>
        PENDIENTE
        CONFIRMADA
        EN_CURSO
        COMPLETADA
        CANCELADA
    }
    
    class EstadoPago {
        <<enumeration>>
        PENDIENTE
        PROCESANDO
        COMPLETADO
        FALLIDO
        REEMBOLSADO
    }
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üîÑ Diagrama de Secuencia</h3>
                <p>Ilustra el flujo completo de una reserva: autenticaci√≥n, b√∫squeda de espacios, verificaci√≥n de disponibilidad, pago y confirmaci√≥n.</p>
                <pre class="mermaid">
sequenceDiagram
    actor Cliente
    participant UI as Interfaz Web
    participant Auth as Servicio Autenticaci√≥n
    participant Reservas as Servicio Reservas
    participant Espacios as Servicio Espacios
    participant Pagos as Servicio Pagos
    participant Email as Servicio Email
    participant DB as Base de Datos
    
    Cliente->>UI: Accede al sistema
    UI->>Auth: Verificar sesi√≥n
    Auth->>DB: Validar token
    DB-->>Auth: Token v√°lido
    Auth-->>UI: Usuario autenticado
    
    Cliente->>UI: Busca espacio (sede, fecha, capacidad)
    UI->>Espacios: buscarEspacios(filtros)
    Espacios->>DB: SELECT espacios WHERE...
    DB-->>Espacios: Lista de espacios
    Espacios-->>UI: Espacios disponibles
    UI-->>Cliente: Muestra resultados
    
    Cliente->>UI: Selecciona espacio y horario
    UI->>Espacios: verificarDisponibilidad(espacioId, fecha, hora)
    Espacios->>DB: Check disponibilidad
    
    alt Espacio disponible
        DB-->>Espacios: Disponible
        Espacios-->>UI: OK - Disponible
        UI-->>Cliente: Confirma disponibilidad
        
        Cliente->>UI: Confirma reserva
        UI->>Reservas: crearReserva(clienteId, espacioId, fecha, hora)
        Reservas->>DB: INSERT reserva (estado: PENDIENTE)
        DB-->>Reservas: Reserva creada (ID: 12345)
        
        Reservas->>Espacios: bloquearHorario(espacioId, fecha, hora)
        Espacios->>DB: UPDATE disponibilidad
        DB-->>Espacios: Horario bloqueado
        
        Reservas->>Reservas: calcularCosto()
        
        alt Cliente con cr√©ditos suficientes
            Reservas->>DB: Deducir cr√©ditos cliente
            DB-->>Reservas: Cr√©ditos deducidos
            Reservas->>DB: UPDATE reserva (estado: CONFIRMADA)
            DB-->>Reservas: Reserva confirmada
            
        else Requiere pago
            Reservas->>Pagos: iniciarPago(reservaId, monto)
            Pagos->>Pagos: Redirigir a pasarela
            Cliente->>Pagos: Ingresa datos de pago
            Pagos->>Pagos: Procesar pago (API externa)
            
            alt Pago exitoso
                Pagos->>DB: INSERT pago (estado: COMPLETADO)
                DB-->>Pagos: Pago registrado
                Pagos->>Reservas: pagoCompletado(reservaId)
                Reservas->>DB: UPDATE reserva (estado: CONFIRMADA)
                DB-->>Reservas: Reserva confirmada
                Pagos->>Pagos: generarFactura()
                
            else Pago fallido
                Pagos->>DB: INSERT pago (estado: FALLIDO)
                Pagos->>Reservas: pagoFallido(reservaId)
                Reservas->>DB: UPDATE reserva (estado: CANCELADA)
                Reservas->>Espacios: liberarHorario(espacioId, fecha, hora)
                Espacios->>DB: UPDATE disponibilidad
                Pagos-->>UI: Error en pago
                UI-->>Cliente: Muestra error
            end
        end
        
        Reservas->>Email: enviarConfirmacion(clienteEmail, reservaId)
        Email-->>Cliente: Email confirmaci√≥n
        
        Reservas-->>UI: Reserva exitosa
        UI-->>Cliente: Muestra confirmaci√≥n + detalles
        
    else Espacio no disponible
        DB-->>Espacios: No disponible
        Espacios-->>UI: Espacio ocupado
        UI-->>Cliente: Sugiere otros horarios
    end
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üóÉÔ∏è Modelo Entidad-Relaci√≥n</h3>
                <p>Dise√±o de la base de datos relacional con PostgreSQL. Incluye 11 entidades principales con sus relaciones.</p>
                <pre class="mermaid">
erDiagram
    USUARIOS ||--o{ CLIENTES : "es"
    USUARIOS ||--o{ ADMINISTRADORES : "es"
    
    CLIENTES ||--o| MEMBRESIAS : "tiene"
    CLIENTES ||--o{ RESERVAS : "realiza"
    CLIENTES ||--o{ PAGOS : "efectua"
    CLIENTES ||--o{ NOTIFICACIONES : "recibe"
    
    SEDES ||--|{ ESPACIOS : "contiene"
    ESPACIOS ||--o{ RESERVAS : "es_reservado"
    
    RESERVAS ||--o| PAGOS : "genera"
    PAGOS ||--|| FACTURAS : "produce"
    
    ADMINISTRADORES ||--o{ REPORTES : "genera"
    ADMINISTRADORES ||--o{ SEDES : "gestiona"
    
    USUARIOS {
        int id PK
        string email UK
        string password_hash
        string nombre
        string apellidos
        string telefono
        enum rol
        datetime fecha_registro
        datetime ultimo_acceso
        boolean activo
    }
    
    CLIENTES {
        int id PK
        int usuario_id FK
        int creditos_disponibles
        float saldo_cuenta
        string preferencias_json
        datetime ultima_reserva
    }
    
    ADMINISTRADORES {
        int id PK
        int usuario_id FK
        string departamento
        string permisos_json
        int sede_asignada_id FK
    }
    
    MEMBRESIAS {
        int id PK
        int cliente_id FK
        enum tipo
        float precio_mensual
        int horas_incluidas
        date fecha_inicio
        date fecha_vencimiento
        boolean activa
        boolean renovacion_automatica
        datetime created_at
        datetime updated_at
    }
    
    SEDES {
        int id PK
        string nombre
        string direccion
        string ciudad
        string pais
        string codigo_postal
        string telefono
        string email
        time hora_apertura
        time hora_cierre
        string dias_operacion
        json coordenadas_gps
        boolean activa
    }
    
    ESPACIOS {
        int id PK
        int sede_id FK
        string nombre
        string codigo
        enum tipo
        int capacidad
        float precio_por_hora
        float precio_por_dia
        string equipamiento_json
        string descripcion
        string fotos_json
        int superficie_m2
        boolean accesible
        boolean activo
    }
    
    RESERVAS {
        int id PK
        int cliente_id FK
        int espacio_id FK
        date fecha_reserva
        time hora_inicio
        time hora_fin
        enum estado
        float precio_total
        float descuento_aplicado
        string motivo_cancelacion
        datetime fecha_creacion
        datetime fecha_modificacion
        datetime checkin_at
        datetime checkout_at
    }
    
    PAGOS {
        int id PK
        int cliente_id FK
        int reserva_id FK
        float monto
        float comision
        enum metodo_pago
        enum estado
        string transaccion_id
        string pasarela
        json datos_pago
        datetime fecha_pago
        datetime fecha_procesado
    }
    
    FACTURAS {
        int id PK
        int pago_id FK
        string numero_factura UK
        date fecha_emision
        float subtotal
        float iva
        float total
        string ruta_pdf
        boolean enviada
        datetime fecha_envio
    }
    
    NOTIFICACIONES {
        int id PK
        int cliente_id FK
        enum tipo
        string titulo
        string mensaje
        json datos_adicionales
        boolean leida
        datetime fecha_envio
        datetime fecha_lectura
    }
    
    REPORTES {
        int id PK
        int admin_id FK
        enum tipo_reporte
        date fecha_desde
        date fecha_hasta
        json parametros
        json resultados
        string ruta_archivo
        datetime fecha_generacion
    }
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üèõÔ∏è Arquitectura en Capas</h3>
                <p>Muestra las 5 capas del sistema: Presentaci√≥n, API/Controllers, L√≥gica de Negocio, Acceso a Datos y Datos (PostgreSQL + Redis).</p>
                <pre class="mermaid">
graph TB
    subgraph "Capa de Presentaci√≥n"
        UI[Web UI - React]
        Mobile[Mobile App - Futuro]
        Admin[Admin Dashboard]
    end
    
    subgraph "Capa de API / Controllers"
        AuthAPI[Auth Controller]
        ReservasAPI[Reservas Controller]
        EspaciosAPI[Espacios Controller]
        PagosAPI[Pagos Controller]
        AdminAPI[Admin Controller]
    end
    
    subgraph "Capa de L√≥gica de Negocio / Services"
        AuthService[Authentication Service]
        ReservasService[Reservas Service]
        EspaciosService[Espacios Service]
        PagosService[Pagos Service]
        NotifService[Notificaciones Service]
        ReportesService[Reportes Service]
    end
    
    subgraph "Capa de Acceso a Datos / Repositories"
        UserRepo[User Repository]
        ReservaRepo[Reserva Repository]
        EspacioRepo[Espacio Repository]
        PagoRepo[Pago Repository]
    end
    
    subgraph "Capa de Datos"
        DB[(PostgreSQL<br/>Base de Datos)]
        Cache[(Redis<br/>Cache)]
    end
    
    subgraph "Servicios Externos"
        Stripe[Stripe API]
        Email[SendGrid API]
        SMS[Twilio API]
        Storage[S3 Storage]
    end
    
    UI --> AuthAPI
    UI --> ReservasAPI
    UI --> EspaciosAPI
    UI --> PagosAPI
    Admin --> AdminAPI
    
    AuthAPI --> AuthService
    ReservasAPI --> ReservasService
    EspaciosAPI --> EspaciosService
    PagosAPI --> PagosService
    AdminAPI --> ReportesService
    
    AuthService --> UserRepo
    ReservasService --> ReservaRepo
    ReservasService --> EspacioRepo
    ReservasService --> NotifService
    EspaciosService --> EspacioRepo
    PagosService --> PagoRepo
    PagosService --> Stripe
    NotifService --> Email
    NotifService --> SMS
    ReportesService --> ReservaRepo
    ReportesService --> PagoRepo
    
    UserRepo --> DB
    ReservaRepo --> DB
    EspacioRepo --> DB
    PagoRepo --> DB
    
    EspacioRepo --> Cache
    ReservaRepo --> Cache
    
    ReportesService --> Storage
    
    style UI fill:#4A90E2
    style Admin fill:#4A90E2
    style DB fill:#2ECC71
    style Cache fill:#F39C12
    style Stripe fill:#E74C3C
    style Email fill:#E74C3C
    style SMS fill:#E74C3C
    style Storage fill:#E74C3C
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üó∫Ô∏è Flujos de Usuario</h3>
                <p>Journey map completo del proceso de reserva, desde el descubrimiento hasta la fidelizaci√≥n del usuario.</p>
                <pre class="mermaid">
graph TD
    Start([Usuario llega a WorkFlex])
    
    Start --> A{¬øUsuario registrado?}
    
    A -->|No| B[Registro]
    B --> C[Validar email]
    C --> D[Login exitoso]
    
    A -->|S√≠| E[Login]
    E --> D
    
    D --> F[Inicio - Dashboard]
    
    F --> G[Buscar espacios]
    
    G --> H[Aplicar filtros:<br/>Ubicaci√≥n, Fecha,<br/>Tipo, Capacidad]
    
    H --> I[Ver resultados]
    
    I --> J{¬øEspacio<br/>encontrado?}
    
    J -->|No| K[Modificar filtros]
    K --> H
    
    J -->|S√≠| L[Ver detalle espacio]
    
    L --> M[Seleccionar fecha/hora]
    
    M --> N{¬øDisponible?}
    
    N -->|No| O[Mostrar horarios<br/>alternativos]
    O --> M
    
    N -->|S√≠| P[Confirmar reserva]
    
    P --> Q{¬øTiene cr√©ditos<br/>suficientes?}
    
    Q -->|S√≠| R[Deducir cr√©ditos]
    R --> S[Reserva confirmada]
    
    Q -->|No| T[Seleccionar m√©todo<br/>de pago]
    
    T --> U[Procesar pago]
    
    U --> V{¬øPago<br/>exitoso?}
    
    V -->|No| W[Mostrar error]
    W --> T
    
    V -->|S√≠| X[Generar factura]
    X --> S
    
    S --> Y[Enviar confirmaci√≥n<br/>por email]
    
    Y --> Z[Mostrar pantalla<br/>de √©xito]
    
    Z --> AA[A√±adir a<br/>'Mis Reservas']
    
    AA --> End([Fin del flujo])
    
    style Start fill:#4A90E2,color:#fff
    style End fill:#2ECC71,color:#fff
    style S fill:#27AE60,color:#fff
    style W fill:#E74C3C,color:#fff
    style V fill:#F39C12
    style N fill:#F39C12
    style Q fill:#F39C12
    style J fill:#F39C12
    style A fill:#F39C12
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üß≠ Mapa de Navegaci√≥n</h3>
                <p>Estructura completa del sitio web con todas las p√°ginas y sub-p√°ginas del sistema.</p>
                <pre class="mermaid">
graph TD
    Home[üè† P√°gina Principal]
    
    Home --> Login[üîê Login/Registro]
    Home --> Busqueda[üîç B√∫squeda de Espacios]
    Home --> Membresias[üíº Membres√≠as]
    Home --> Nosotros[‚ÑπÔ∏è Sobre WorkFlex]
    
    Busqueda --> Filtros[Aplicar Filtros]
    Busqueda --> DetalleEspacio[üìã Detalle de Espacio]
    
    DetalleEspacio --> Reserva[üìÖ Proceso de Reserva]
    
    Reserva --> SeleccionFecha[Seleccionar Fecha/Hora]
    SeleccionFecha --> Pago[üí≥ Pasarela de Pago]
    Pago --> Confirmacion[‚úÖ Confirmaci√≥n de Reserva]
    Confirmacion --> Email[üìß Email Confirmaci√≥n]
    
    Login --> PanelUsuario[üë§ Panel de Usuario]
    
    PanelUsuario --> MisReservas[üìë Mis Reservas]
    PanelUsuario --> MiPerfil[‚öôÔ∏è Mi Perfil]
    PanelUsuario --> MiMembresia[üíº Mi Membres√≠a]
    PanelUsuario --> Pagos[üí∞ Historial de Pagos]
    PanelUsuario --> Facturas[üßæ Mis Facturas]
    
    MisReservas --> ModificarReserva[‚úèÔ∏è Modificar Reserva]
    MisReservas --> CancelarReserva[‚ùå Cancelar Reserva]
    MisReservas --> CheckIn[‚úîÔ∏è Check-in Digital]
    
    MiMembresia --> UpgradeMembresia[‚¨ÜÔ∏è Upgrade Membres√≠a]
    MiMembresia --> RenovarMembresia[üîÑ Renovar Membres√≠a]
    
    Login --> PanelAdmin[üë®‚Äçüíº Panel Administrador]
    
    PanelAdmin --> Dashboard[üìä Dashboard]
    PanelAdmin --> GestionEspacios[üè¢ Gesti√≥n de Espacios]
    PanelAdmin --> GestionUsuarios[üë• Gesti√≥n de Usuarios]
    PanelAdmin --> Reportes[üìà Reportes]
    PanelAdmin --> Configuracion[‚öôÔ∏è Configuraci√≥n]
    
    GestionEspacios --> CrearEspacio[‚ûï Crear Espacio]
    GestionEspacios --> EditarEspacio[‚úèÔ∏è Editar Espacio]
    GestionEspacios --> EliminarEspacio[üóëÔ∏è Desactivar Espacio]
    
    GestionUsuarios --> VerUsuarios[üëÄ Ver Usuarios]
    GestionUsuarios --> EditarPermisos[üîë Editar Permisos]
    GestionUsuarios --> GestionMembresias[üíº Gesti√≥n Membres√≠as]
    
    Reportes --> ReporteOcupacion[üìä Reporte Ocupaci√≥n]
    Reportes --> ReporteIngresos[üíµ Reporte Ingresos]
    Reportes --> ReporteUsuarios[üë• Reporte Usuarios]
    Reportes --> ExportarReporte[üì• Exportar]
    
    Configuracion --> ConfigTarifas[üí≤ Configurar Tarifas]
    Configuracion --> ConfigNotif[üîî Configurar Notificaciones]
    Configuracion --> ConfigSedes[üè¢ Gestionar Sedes]
    
    style Home fill:#4A90E2,color:#fff
    style PanelUsuario fill:#2ECC71,color:#fff
    style PanelAdmin fill:#E74C3C,color:#fff
    style Pago fill:#F39C12,color:#fff
    style Confirmacion fill:#27AE60,color:#fff
                </pre>
            </div>

            <div class="diagram-container">
                <h3>üèõÔ∏è Arquitectura T√©cnica Detallada</h3>
                <p>Diagrama completo del sistema: Clientes, CDN, API Gateway, Backend (Modular Monolith), Cache, Base de Datos y Servicios Externos.</p>
                <pre class="mermaid">
graph TB
    subgraph "Clientes"
        Web[üíª Web App<br/>React + Vite]
        Mobile[üì± Mobile<br/>React Native<br/>Fase 2]
        Admin[üñ•Ô∏è Admin Panel<br/>React]
    end
    
    subgraph "CDN y Assets"
        CDN[‚òÅÔ∏è Cloudflare CDN<br/>Assets est√°ticos]
        S3[üì¶ AWS S3<br/>Im√°genes y PDFs]
    end
    
    subgraph "API Gateway & Load Balancer"
        LB[‚öñÔ∏è NGINX<br/>Load Balancer]
        Gateway[üö™ API Gateway<br/>Rate limiting<br/>Authentication]
    end
    
    subgraph "Aplicaci√≥n Backend - Modular Monolith"
        direction TB
        API[üîå REST API Layer<br/>Express.js / FastAPI]
        
        subgraph "M√≥dulos de Negocio"
            Auth[üîê Auth Module<br/>JWT + OAuth]
            Reservas[üìÖ Reservations Module<br/>Booking logic]
            Espacios[üè¢ Spaces Module<br/>Availability engine]
            Pagos[üí≥ Payments Module<br/>Payment orchestration]
            Notif[üìß Notifications Module<br/>Email/SMS queue]
            Reports[üìä Reports Module<br/>Analytics engine]
        end
        
        subgraph "Capa de Datos"
            Repos[üìö Repositories<br/>Data access layer]
        end
    end
    
    subgraph "Capa de Cache"
        Redis[(üî¥ Redis<br/>Session store<br/>Query cache)]
    end
    
    subgraph "Base de Datos"
        Postgres[(üêò PostgreSQL<br/>Master DB)]
        PG_Read[(üêò PostgreSQL<br/>Read Replica<br/>Fase 2)]
    end
    
    subgraph "Message Queue Fase 2"
        Queue[üì® RabbitMQ/SQS<br/>Async tasks]
    end
    
    subgraph "Servicios Externos"
        Stripe[üí≥ Stripe API<br/>Payment processing]
        SendGrid[üìß SendGrid<br/>Transactional email]
        Twilio[üì± Twilio<br/>SMS notifications]
        Maps[üó∫Ô∏è Google Maps API<br/>Geolocation]
    end
    
    subgraph "Monitoring & Logging"
        Logger[üìù Winston/Pino<br/>Application logs]
        Monitor[üìà Prometheus + Grafana<br/>Metrics & alerts]
        Sentry[üêõ Sentry<br/>Error tracking]
    end
    
    subgraph "CI/CD Pipeline"
        GitHub[üêô GitHub<br/>Source control]
        Actions[‚öôÔ∏è GitHub Actions<br/>CI/CD]
        Docker[üê≥ Docker<br/>Containerization]
    end
    
    Web --> CDN
    Admin --> CDN
    Web --> LB
    Mobile --> LB
    Admin --> LB
    
    CDN --> S3
    
    LB --> Gateway
    Gateway --> API
    
    API --> Auth
    API --> Reservas
    API --> Espacios
    API --> Pagos
    API --> Notif
    API --> Reports
    
    Auth --> Repos
    Reservas --> Repos
    Espacios --> Repos
    Pagos --> Repos
    Notif --> Queue
    Reports --> Repos
    
    Repos --> Redis
    Repos --> Postgres
    
    Postgres -.->|Replicaci√≥n| PG_Read
    Reports --> PG_Read
    
    Pagos --> Stripe
    Notif --> SendGrid
    Notif --> Twilio
    Espacios --> Maps
    
    API --> Logger
    API --> Monitor
    API --> Sentry
    
    GitHub --> Actions
    Actions --> Docker
    Docker --> API
    
    style Web fill:#4A90E2
    style Admin fill:#4A90E2
    style API fill:#2ECC71
    style Postgres fill:#336791
    style Redis fill:#DC382D
    style Stripe fill:#635BFF
    style Gateway fill:#FF6B6B
                </pre>
            </div>


            <div class="diagram-container">
                <h3>üìñ Documentaci√≥n</h3>
                <p><a href="README.md" style="color: #4A90E2;">Ver README completo del proyecto</a></p>
            </div>
        </div>

        <footer>
            <p><strong>WorkFlex - Diagramas del Proyecto</strong></p>
            <p>Ingenier√≠a de Software | Noviembre 2025</p>
            <p style="margin-top: 1rem;">
                <a href="README.md">üìñ Documentaci√≥n</a> |
                <a href="https://github.com/juanulisespv/Propuesta_tecnica_WorkFlex" target="_blank">üêô GitHub</a>
            </p>
        </footer>
    </div>
</body>
</html>